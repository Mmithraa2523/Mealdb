<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ meal.strMeal }} | Culinary</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* ===== MAIN LAYOUT ===== */
.main {
    margin-left: 240px;
    padding: 30px;
}

/* ===== HERO ===== */
.recipe-hero {
    height: 360px;
    background-size: cover;
    background-position: center;
    border-radius: 20px;
    position: relative;
}

.hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.2));
    color: white;
    padding: 40px;
    border-radius: 20px;
}

.hero-overlay h1 {
    font-size: 40px;
    margin: 15px 0;
}

.tag {
    background: #f6ad55;
    color: black;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    margin-right: 8px;
}

.tag.light {
    background: #edf2f7;
}

/* ===== HERO BUTTONS ===== */
.hero-actions {
    margin-top: 20px;
}

.hero-btn {
    padding: 10px 20px;
    border-radius: 25px;
    background: #38a169;
    color: white;
    text-decoration: none;
    border: none;
    cursor: pointer;
    margin-right: 10px;
}

.hero-btn.outline {
    background: transparent;
    border: 1px solid white;
}

/* ===== PAGE CONTENT ===== */
.recipe-container {
    padding: 30px 10px;
}

/* ===== NUTRITION ===== */
.nutrition-cards {
    display: flex;
    gap: 20px;
    margin: 30px 0;
}

.nutri-card {
    flex: 1;
    padding: 20px;
    border-radius: 14px;
    text-align: center;
    font-size: 26px;
    font-weight: bold;
}

.nutri-card span {
    display: block;
    font-size: 14px;
    margin-top: 6px;
    font-weight: normal;
}

.calories { background: #fff3e8; color: #dd6b20; }
.protein  { background: #ebf8ff; color: #3182ce; }
.fat      { background: #ecfdf5; color: #2f855a; }

/* ===== GRID ===== */
.recipe-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

/* ===== BOX ===== */
.box {
    background: white;
    padding: 25px;
    border-radius: 18px;
}

/* ===== INGREDIENTS ===== */
.ingredients-list {
    list-style: none;
    padding: 0;
}

.ingredients-list li {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed #ddd;
}

/* ===== INSTRUCTIONS ===== */
.instructions {
    line-height: 1.6;
}

/* ===== YOUTUBE ===== */
.youtube-link {
    display: inline-block;
    margin-top: 15px;
    color: #e53e3e;
    font-weight: bold;
}

/* ===== MODAL ===== */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    padding: 25px;
    border-radius: 16px;
    width: 320px;
}

.close-btn {
    margin-top: 10px;
    background: #e53e3e;
    color: white;
    border: none;
    padding: 8px;
    width: 100%;
    border-radius: 10px;
}

    </style>
</head>
<body>

<!-- ========== SIDEBAR ========== -->
<div class="sidebar">
    <div class="logo">üç¥ Culinary</div>

    <ul class="menu">
        <li><a href="/dashboard">üîç Discover</a></li>
        <li><a href="/favorites">‚ù§Ô∏è Favorites</a></li>
        <li><a href="/meal-plan">üìÖ Meal Plan</a></li>
        <li><a href="/quick-meals">‚ö° Quick Meals</a></li>
    </ul>

    <div class="user">
        <p>üë§ Logged In</p>
        <a href="/logout" class="logout">Sign Out</a>
    </div>
</div>

<!-- ========== MAIN CONTENT ========== -->
<div class="main">

    <!-- HERO -->
    <div class="recipe-hero"
         style="background-image: url('{{ meal.strMealThumb }}');">
        <div class="hero-overlay">
            <div class="tags">
                <span class="tag">{{ meal.strCategory }}</span>
                <span class="tag light">{{ meal.strArea }}</span>
            </div>

           <h1 style="color: white;">
    {{ meal.strMeal }}
</h1>
            <div class="hero-actions">
                <a href="/favorite/{{ meal.idMeal }}" class="hero-btn">‚ù§Ô∏è Save</a>
                <button class="hero-btn outline" onclick="openPlanner()">ü•ó Plan Meal</button>
                <button class="hero-btn outline" onclick="window.print()">üñ®Ô∏è Print</button>
            </div>
        </div>
    </div>

    <!-- PAGE CONTENT -->
    <div class="recipe-container">

        <!-- NUTRITION -->
        <div class="nutrition-cards">
            <div class="nutri-card calories">
                {{ nutrition.calories }}
                <span>Calories</span>
            </div>
            <div class="nutri-card protein">
                {{ nutrition.protein }} g
                <span>Protein</span>
            </div>
            <div class="nutri-card fat">
                {{ nutrition.fat }} g
                <span>Fat</span>
            </div>
        </div>

        <!-- GRID -->
        <div class="recipe-grid">

            <!-- INGREDIENTS -->
            <div class="box">
                <h2>Ingredients</h2>
                <ul class="ingredients-list">
                    {% for i in range(1,21) %}
                    {% if meal["strIngredient"+i|string] %}
                    <li>
                        {{ meal["strIngredient"+i|string] }}
                        <span>{{ meal["strMeasure"+i|string] }}</span>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>

            <!-- INSTRUCTIONS -->
            <div class="box">
                <h2>Instructions</h2>
                <p class="instructions">{{ meal.strInstructions }}</p>

                {% if meal.strYoutube %}
                <a href="{{ meal.strYoutube }}" target="_blank" class="youtube-link">
                    ‚ñ∂ Watch on YouTube
                </a>
                {% endif %}
            </div>

        </div>
    </div>
</div>

<!-- ========== PLAN MEAL MODAL ========== -->
<div id="plannerModal" class="modal">
    <div class="modal-content">
        <h3>Plan Meal</h3>

        <form method="POST" action="/add-meal-plan">
            <input type="hidden" name="meal_id" value="{{ meal.idMeal }}">
            <input type="hidden" name="meal_name" value="{{ meal.strMeal }}">
            <input type="hidden" name="meal_image" value="{{ meal.strMealThumb }}">

            <label>Day</label>
            <select name="day" required>
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
                <option>Sunday</option>
            </select>

            <label>Meal Type</label>
            <select name="meal_type" required>
                <option>Breakfast</option>
                <option>Lunch</option>
                <option>Dinner</option>
            </select>

            <button type="submit" class="hero-btn">Save to Meal Plan</button>
            <button type="button" class="close-btn" onclick="closePlanner()">Cancel</button>
        </form>
    </div>
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

